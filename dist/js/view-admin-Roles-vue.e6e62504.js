(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["view-admin-Roles-vue"],{"0888":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"roles"},[o("h1",[e._v(e._s(e.viewTitle))]),o("div",{staticClass:"utilityBar",class:{creatingRole:!0===e.isCreatingRole}},[o("button",{staticClass:"btn btn--xs btn--borderBlue btn--borderBottom",on:{click:function(t){e.isCreatingRole=!e.isCreatingRole}}},[e._v(e._s(e.isCreatingRole?"Cancel":"Create"))]),e.isCreatingRole?e._e():o("div",{staticClass:"selectBox"},[o("label",{attrs:{for:"roles"}},[e._v("Roles")]),o("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedRole,expression:"selectedRole"}],attrs:{id:"roles"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedRole=t.target.multiple?r:r[0]}}},e._l(e.selectBoxRoles,(function(t){return o("option",{key:t.id,domProps:{value:t}},[e._v(e._s(t.name))])})),0)])]),!e.isCreatingRole&&e.selectedRole?o("div",{staticClass:"selectedRole"},[o("div",{staticClass:"title"},[o("h2",[e._v(e._s(e.selectedRole.name))]),o("div",{staticClass:"buttons"},[o("button",{staticClass:"btn btn--xs btn--green",on:{click:function(t){return e.togglePopUp(!0,"show","addUser")}}},[e._v("Add User")])])]),o("RolesList",e._b({on:{addOrRemoveFromRole:e.verifyRemoveUserFromRole}},"RolesList",{selectedRole:e.selectedRole},!1)),o("PopUp",{directives:[{name:"show",rawName:"v-show",value:e.isPopUpShowing,expression:"isPopUpShowing"}],attrs:{title:e.popUp.title,classStatus:e.popUp.classStatus},on:{click:function(t){return e.togglePopUp(!1,"hide")}},scopedSlots:e._u([{key:"content",fn:function(){return[e.isAddingUserToRole?o("div",{staticClass:"allUsers"},e._l(e.allUsers,(function(t){return o("div",{key:t.id,staticClass:"user"},[o("h3",[e._v(e._s(t.fullName))]),o("button",{on:{click:function(r){return e.addUserToRole(t)}}},[o("img",{attrs:{src:r("356a"),alt:"add + symbol"}})])])})),0):o("div",{staticClass:"popUpButtons"},[o("button",{staticClass:"btn btn--green btn--sm",on:{click:function(t){return e.removeUserFromRole(!0)}}},[e._v("Yes")]),o("button",{staticClass:"btn btn--red btn--sm",on:{click:function(t){return e.removeUserFromRole(!1)}}},[e._v("No")])])]},proxy:!0}],null,!1,338006544)})],1):e.isCreatingRole?o("FormComponent",{scopedSlots:e._u([{key:"fieldOne",fn:function(){return[o("label",{attrs:{for:"roleName"}},[e._v("Role Name")]),o("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.createRoleForm.roleName,expression:"createRoleForm.roleName",modifiers:{trim:!0}}],attrs:{type:"text",id:"roleName"},domProps:{value:e.createRoleForm.roleName},on:{input:function(t){t.target.composing||e.$set(e.createRoleForm,"roleName",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]},proxy:!0},{key:"button",fn:function(){return[o("button",{staticClass:"btn btn--xs btn--blue",attrs:{id:"loginBTN"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.createRole(t)}}},[e._v("Create")])]},proxy:!0}])}):e._e()],1)},n=[],s=(r("4de4"),r("c740"),r("4160"),r("d81d"),r("a434"),r("b0c0"),r("d3b7"),r("159b"),r("9ab4")),i=r("60a3"),a=r("86bc"),c="/roles",l=function(){function e(){}return e.roleList=function(){return Object(s["a"])(this,void 0,Promise,(function(){return Object(s["d"])(this,(function(e){switch(e.label){case 0:return[4,a["a"].get(c+"/RoleList")];case 1:return[2,e.sent()]}}))}))},e.createRole=function(e){return Object(s["a"])(this,void 0,Promise,(function(){return Object(s["d"])(this,(function(t){switch(t.label){case 0:return[4,a["a"].post(c+"/createRole",e)];case 1:return[2,t.sent()]}}))}))},e.editRole=function(e){return Object(s["a"])(this,void 0,Promise,(function(){return Object(s["d"])(this,(function(t){switch(t.label){case 0:return[4,a["a"].patch(c+"/EditRole",e)];case 1:return[2,t.sent()]}}))}))},e.deleteRole=function(e){return Object(s["a"])(this,void 0,Promise,(function(){return Object(s["d"])(this,(function(t){switch(t.label){case 0:return[4,a["a"].delete(c+"/DeleteRole/"+e)];case 1:return[2,t.sent()]}}))}))},e.getRoleById=function(e){return Object(s["a"])(this,void 0,Promise,(function(){return Object(s["d"])(this,(function(t){switch(t.label){case 0:return[4,a["a"].get(c+"/RoleById/"+e)];case 1:return[2,t.sent()]}}))}))},e.AddOrRemoveUserFromRole=function(e){return Object(s["a"])(this,void 0,Promise,(function(){return Object(s["d"])(this,(function(t){switch(t.label){case 0:return[4,a["a"].post(c+"/AddOrRemoveUserFromRole/",e)];case 1:return[2,t.sent()]}}))}))},e.addUsersToRole=function(e){return Object(s["a"])(this,void 0,Promise,(function(){return Object(s["d"])(this,(function(t){switch(t.label){case 0:return[4,a["a"].post(c+"/AddUsersListToRole/",e)];case 1:return[2,t.sent()]}}))}))},e}(),u=l,d=r("53ec"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Roles=[],t.selectedRole=null,t.showModal=!1,t.selectedToDelete=null,t.isCreatingRole=!1,t.isAddingUserToRole=!1,t.viewTitle="Roles",t.isPopUpShowing=!1,t.popUp={classStatus:"",title:""},t.userToRemoveFromRole=null,t.createRoleForm={roleName:""},t}return Object(s["c"])(t,e),t.prototype.togglePopUp=function(e,t,r){var o=this;this.popUp.classStatus=t,e?("addUser"===r?(this.isAddingUserToRole=!0,this.popUp.title="Users"):"removeUser"===r&&(this.popUp.title="Are you sure you want to remove user from this role?"),this.isPopUpShowing=!0):setTimeout((function(){o.popUp.title="",o.isAddingUserToRole=!1,o.isPopUpShowing=!1}),500)},t.prototype.mounted=function(){this.RoleList()},Object.defineProperty(t.prototype,"selectBoxRoles",{get:function(){return this.Roles.filter((function(e){return"User"!==e.name}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allUsers",{get:function(){if(this.selectedRole){var e=[];this.Roles.forEach((function(t){t.users.forEach((function(t){e.push(t)}))}));var t=[];return this.selectedRole.users.forEach((function(e){t.push(e.id)})),e=e.filter((function(e,t,r){return r.findIndex((function(t){return t.id===e.id}))===t})),e}return null},enumerable:!0,configurable:!0}),t.prototype.showUsersInRole=function(e){return e.users.map((function(e){return e.fullName}))},t.prototype.createRole=function(){return Object(s["a"])(this,void 0,Promise,(function(){var e,t;return Object(s["d"])(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,u.createRole(this.createRoleForm)];case 1:return e=r.sent(),console.log(e),[3,3];case 2:return t=r.sent(),console.log(t),[3,3];case 3:return[2]}}))}))},t.prototype.RoleList=function(){return Object(s["a"])(this,void 0,Promise,(function(){var e,t;return Object(s["d"])(this,(function(r){switch(r.label){case 0:return[4,d["a"].DataLoading(!0)];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,4,5,7]),[4,u.roleList()];case 3:return e=r.sent(),200===e.status&&(this.Roles=e.data),[3,7];case 4:return t=r.sent(),console.log(t),[3,7];case 5:return[4,d["a"].DataLoading(!1)];case 6:return r.sent(),[7];case 7:return[2]}}))}))},t.prototype.addUserToRole=function(e){var t,r;return Object(s["a"])(this,void 0,Promise,(function(){var o,n,i,a,c;return Object(s["d"])(this,(function(s){switch(s.label){case 0:return o=null===(t=this.selectedRole)||void 0===t?void 0:t.users.findIndex((function(t){return t.id===e.id})),-1===o&&this.selectedRole?[4,d["a"].DataLoading(!0)]:[3,9];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,4,5,8]),n={roleId:this.selectedRole.id,userId:e.id,status:"add"},[4,u.AddOrRemoveUserFromRole(n)];case 3:return i=s.sent(),200===i.status&&this.selectedRole.users.push(e),[3,8];case 4:return a=s.sent(),console.log(a),[3,8];case 5:return this.isAddingUserToRole=!1,[4,d["a"].DataLoading(!1)];case 6:return s.sent(),c={title:"Success",message:e.fullName+" added to "+this.selectedRole.name,isSnackBarShowing:!0,class:"primary",errors:[]},this.isPopUpShowing=!1,[4,d["a"].SnackBar(c)];case 7:return s.sent(),[7];case 8:return[3,11];case 9:return c={title:"Error",message:e.fullName+" already exists in "+(null===(r=this.selectedRole)||void 0===r?void 0:r.name),isSnackBarShowing:!0,class:"error",errors:[]},[4,d["a"].SnackBar(c)];case 10:s.sent(),s.label=11;case 11:return[2]}}))}))},t.prototype.verifyRemoveUserFromRole=function(e){null===this.userToRemoveFromRole&&(this.togglePopUp(!0,"show","removeUser"),this.userToRemoveFromRole=e)},t.prototype.removeUserFromRole=function(e){var t,r;return Object(s["a"])(this,void 0,Promise,(function(){var o,n,i,a;return Object(s["d"])(this,(function(s){switch(s.label){case 0:return!0===e&&this.userToRemoveFromRole?(o=this.userToRemoveFromRole.userId,[4,d["a"].DataLoading(!0)]):[3,8];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,4,5,7]),[4,u.AddOrRemoveUserFromRole(this.userToRemoveFromRole)];case 3:return n=s.sent(),200===n.status&&this.selectedRole&&(i=null===(t=this.selectedRole)||void 0===t?void 0:t.users.findIndex((function(e){return e.id===o})),null===(r=this.selectedRole)||void 0===r||r.users.splice(i,1)),console.log(n),[3,7];case 4:return a=s.sent(),console.log(a),[3,7];case 5:return this.isPopUpShowing=!1,this.userToRemoveFromRole=null,[4,d["a"].DataLoading(!1)];case 6:return s.sent(),[7];case 7:return[3,9];case 8:this.isPopUpShowing=!1,this.userToRemoveFromRole=null,s.label=9;case 9:return[2]}}))}))},t.prototype.confirmModal=function(e,t){this.showModal=e,this.selectedToDelete=e&&t?t:null},t.prototype.deleteRole=function(e){return Object(s["a"])(this,void 0,Promise,(function(){var t,r,o;return Object(s["d"])(this,(function(n){switch(n.label){case 0:this.confirmModal(!1),n.label=1;case 1:return n.trys.push([1,4,,5]),e?[4,u.deleteRole(e.id)]:[3,3];case 2:t=n.sent(),console.log(t),200===t.status&&(r=this.Roles.findIndex((function(t){return t.id===e.id})),this.Roles.splice(r,1)),n.label=3;case 3:return[3,5];case 4:return o=n.sent(),console.log(o),[3,5];case 5:return[2]}}))}))},t=Object(s["b"])([Object(i["a"])({name:"Roles",components:{RolesList:function(){return r.e("chunk-1fc4e76e").then(r.bind(null,"11d8"))},FormComponent:function(){return r.e("chunk-82a0aa8a").then(r.bind(null,"cf55"))},PopUp:function(){return r.e("chunk-e8e9fdf4").then(r.bind(null,"044d"))}}})],t),t}(i["d"]),p=f,h=p,m=(r("fc88"),r("2877")),v=Object(m["a"])(h,o,n,!1,null,null,null);t["default"]=v.exports},"159b":function(e,t,r){var o=r("da84"),n=r("fdbc"),s=r("17c2"),i=r("9112");for(var a in n){var c=o[a],l=c&&c.prototype;if(l&&l.forEach!==s)try{i(l,"forEach",s)}catch(u){l.forEach=s}}},"17c2":function(e,t,r){"use strict";var o=r("b727").forEach,n=r("a640"),s=r("ae40"),i=n("forEach"),a=s("forEach");e.exports=i&&a?[].forEach:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}},"1dde":function(e,t,r){var o=r("d039"),n=r("b622"),s=r("2d00"),i=n("species");e.exports=function(e){return s>=51||!o((function(){var t=[],r=t.constructor={};return r[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"356a":function(e,t,r){e.exports=r.p+"img/addCircle.e9f990d0.svg"},4160:function(e,t,r){"use strict";var o=r("23e7"),n=r("17c2");o({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"4de4":function(e,t,r){"use strict";var o=r("23e7"),n=r("b727").filter,s=r("1dde"),i=r("ae40"),a=s("filter"),c=i("filter");o({target:"Array",proto:!0,forced:!a||!c},{filter:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},"65f0":function(e,t,r){var o=r("861d"),n=r("e8b5"),s=r("b622"),i=s("species");e.exports=function(e,t){var r;return n(e)&&(r=e.constructor,"function"!=typeof r||r!==Array&&!n(r.prototype)?o(r)&&(r=r[i],null===r&&(r=void 0)):r=void 0),new(void 0===r?Array:r)(0===t?0:t)}},8418:function(e,t,r){"use strict";var o=r("c04e"),n=r("9bf2"),s=r("5c6c");e.exports=function(e,t,r){var i=o(t);i in e?n.f(e,i,s(0,r)):e[i]=r}},"8f40":function(e,t,r){},a434:function(e,t,r){"use strict";var o=r("23e7"),n=r("23cb"),s=r("a691"),i=r("50c4"),a=r("7b0b"),c=r("65f0"),l=r("8418"),u=r("1dde"),d=r("ae40"),f=u("splice"),p=d("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,m=Math.min,v=9007199254740991,b="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!f||!p},{splice:function(e,t){var r,o,u,d,f,p,R=a(this),g=i(R.length),y=n(e,g),U=arguments.length;if(0===U?r=o=0:1===U?(r=0,o=g-y):(r=U-2,o=m(h(s(t),0),g-y)),g+r-o>v)throw TypeError(b);for(u=c(R,o),d=0;d<o;d++)f=y+d,f in R&&l(u,d,R[f]);if(u.length=o,r<o){for(d=y;d<g-o;d++)f=d+o,p=d+r,f in R?R[p]=R[f]:delete R[p];for(d=g;d>g-o+r;d--)delete R[d-1]}else if(r>o)for(d=g-o;d>y;d--)f=d+o-1,p=d+r-1,f in R?R[p]=R[f]:delete R[p];for(d=0;d<r;d++)R[d+y]=arguments[d+2];return R.length=g-o+r,u}})},a640:function(e,t,r){"use strict";var o=r("d039");e.exports=function(e,t){var r=[][e];return!!r&&o((function(){r.call(null,t||function(){throw 1},1)}))}},b727:function(e,t,r){var o=r("0366"),n=r("44ad"),s=r("7b0b"),i=r("50c4"),a=r("65f0"),c=[].push,l=function(e){var t=1==e,r=2==e,l=3==e,u=4==e,d=6==e,f=5==e||d;return function(p,h,m,v){for(var b,R,g=s(p),y=n(g),U=o(h,m,3),w=i(y.length),S=0,L=v||a,O=t?L(p,w):r?L(p,0):void 0;w>S;S++)if((f||S in y)&&(b=y[S],R=U(b,S,g),e))if(t)O[S]=R;else if(R)switch(e){case 3:return!0;case 5:return b;case 6:return S;case 2:c.call(O,b)}else if(u)return!1;return d?-1:l||u?u:O}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},c740:function(e,t,r){"use strict";var o=r("23e7"),n=r("b727").findIndex,s=r("44d2"),i=r("ae40"),a="findIndex",c=!0,l=i(a);a in[]&&Array(1)[a]((function(){c=!1})),o({target:"Array",proto:!0,forced:c||!l},{findIndex:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),s(a)},d81d:function(e,t,r){"use strict";var o=r("23e7"),n=r("b727").map,s=r("1dde"),i=r("ae40"),a=s("map"),c=i("map");o({target:"Array",proto:!0,forced:!a||!c},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},e8b5:function(e,t,r){var o=r("c6b6");e.exports=Array.isArray||function(e){return"Array"==o(e)}},fc88:function(e,t,r){"use strict";var o=r("8f40"),n=r.n(o);n.a},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=view-admin-Roles-vue.e6e62504.js.map