(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["view-bet-SelectedBet-vue"],{2362:function(e,t,s){"use strict";s("d3b7");var r=s("9ab4"),n=s("86bc"),c="/bets",a=function(){function e(){}return e.GetUserBets=function(e){return Object(r["a"])(this,void 0,Promise,(function(){return Object(r["d"])(this,(function(t){switch(t.label){case 0:return[4,n["a"].get(c+"/UserBets/"+e)];case 1:return[2,t.sent()]}}))}))},e.AllActiveBets=function(){return Object(r["a"])(this,void 0,Promise,(function(){return Object(r["d"])(this,(function(e){switch(e.label){case 0:return[4,n["a"].get(c+"/AllActiveBets")];case 1:return[2,e.sent()]}}))}))},e.UpdateBet=function(e){return Object(r["a"])(this,void 0,Promise,(function(){return Object(r["d"])(this,(function(t){switch(t.label){case 0:return[4,n["a"].post(c+"/UpdateBet",e)];case 1:return[2,t.sent()]}}))}))},e.CreateBet=function(e){return Object(r["a"])(this,void 0,Promise,(function(){return Object(r["d"])(this,(function(t){switch(t.label){case 0:return[4,n["a"].post(c+"/CreateBet",e)];case 1:return[2,t.sent()]}}))}))},e.UserAcceptsBet=function(e){return Object(r["a"])(this,void 0,Promise,(function(){return Object(r["d"])(this,(function(t){switch(t.label){case 0:return[4,n["a"].post(c+"/AcceptBet",e)];case 1:return[2,t.sent()]}}))}))},e.GetBetById=function(e){return Object(r["a"])(this,void 0,Promise,(function(){return Object(r["d"])(this,(function(t){switch(t.label){case 0:return[4,n["a"].get(c+"/Bet/"+e)];case 1:return[2,t.sent()]}}))}))},e}();t["a"]=a},"2da4":function(e,t,s){},3470:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"selectedBet"},[e.selectedBet&&!e.loading?s("div",[s("h2",[e._v(e._s(e.selectedBet.title))]),s("div",{staticClass:"createdBy section"},[s("p",[e._v("Created: "+e._s(e.formatDate(e.selectedBet.createdOn)))]),s("p",[e._v("By: "+e._s(e.selectedBet.createdBy.fullName))])]),s("div",{staticClass:"acceptedBy section"},[s("div",{staticClass:"one"},[s("div",[s("h3",{staticClass:"propTitle"},[e._v("Accepted:")]),s("span",[e._v(e._s(e.selectedBet.acceptedBy.length)+" / "+e._s(e.selectedBet.canAcceptNumber))])]),s("div",[e.canUserAcceptBet?s("button",{on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.acceptBet(t)}}},[e._v("Accept Bet")]):e._e()])]),s("div",{staticClass:"two"},[0===e.selectedBet.acceptedBy.length?s("div",{staticClass:"notAccepted"},[s("p",[e._v("No one has accepted this bet.")])]):s("div",{staticClass:"acceptedUsers"},e._l(this.selectedBet.acceptedBy,(function(t,r){return s("div",{key:t.userId,staticClass:"user"},[s("span",{staticClass:"indexNum"},[e._v(e._s(r+1))]),s("h4",[e._v(e._s(t.fullName))])])})),0)])]),s("div",{staticClass:"description section"},[s("h3",[e._v("Description:")]),s("div",{staticClass:"descriptionBorder"},[s("div",{staticClass:"inner"},[s("p",[e._v(e._s(e.selectedBet.description))])])])])]):s("Loading")],1)},n=[],c=(s("caad"),s("d81d"),s("d3b7"),s("2532"),s("9ab4")),a=s("1b40"),i=s("2362"),o=s("2b89"),u=s("53ec"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loading=!0,t.currentUser={},t.selectedBet=null,t}return Object(c["c"])(t,e),t.prototype.mounted=function(){this.getSelectedBet(),this.currentUser=this.$store.state.authStore.currentUser},Object.defineProperty(t.prototype,"canUserAcceptBet",{get:function(){var e,t=null===(e=this.selectedBet)||void 0===e?void 0:e.acceptedBy.map((function(e){return e.id}));return(!this.selectedBet||this.selectedBet.createdBy.id!==this.currentUser.id)&&((!t||!t.includes(this.currentUser.id))&&!(this.selectedBet&&this.selectedBet.acceptedBy.length===this.selectedBet.canAcceptNumber))},enumerable:!1,configurable:!0}),t.prototype.formatDate=function(e){return o["a"].formatDate(e)},t.prototype.getSelectedBet=function(){return Object(c["a"])(this,void 0,Promise,(function(){var e,t,s=this;return Object(c["d"])(this,(function(r){switch(r.label){case 0:this.loading=!0,r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,i["a"].GetBetById(parseInt(this.$route.params.betId))];case 2:return e=r.sent(),200===e.status&&(this.selectedBet=e.data),[3,5];case 3:return t=r.sent(),console.log(t),this.$router.go(-1),[3,5];case 4:return setTimeout((function(){s.loading=!1}),Math.floor(2e3*Math.random())),[7];case 5:return[2]}}))}))},t.prototype.acceptBet=function(){return Object(c["a"])(this,void 0,Promise,(function(){var e,t,s,r=this;return Object(c["d"])(this,(function(n){switch(n.label){case 0:if(this.loading=!0,!this.selectedBet)return[3,5];e={userId:this.currentUser.id,betId:this.selectedBet.betId},n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,i["a"].UserAcceptsBet(e)];case 2:return t=n.sent(),200===t.status&&(this.selectedBet.acceptedBy.push(t.data),u["a"].SnackBar({title:"Success",message:"Your bet was accepted.",isSnackBarShowing:!0,classInfo:"primary"})),[3,5];case 3:return s=n.sent(),console.log(s),[3,5];case 4:return setTimeout((function(){r.loading=!1}),Math.floor(3e3*Math.random())),[7];case 5:return[2]}}))}))},t=Object(c["b"])([Object(a["a"])({name:"SelectedBet",components:{Loading:function(){return s.e("chunk-3be14acd").then(s.bind(null,"866a"))}}})],t),t}(a["d"]),l=d,h=l,p=(s("a5e5"),s("2877")),b=Object(p["a"])(h,r,n,!1,null,"45d72a06",null);t["default"]=b.exports},"86bc":function(e,t,s){"use strict";s("d3b7");var r=s("9ab4"),n=s("bc3a"),c=s.n(n),a=s("88b4"),i=s.n(a),o=s("0613"),u="https://sandbaggerapi.azurewebsites.net/api",d=new i.a({isCompression:!1}),l=c.a.create({baseURL:u});l.interceptors.request.use((function(e){e.withCredentials=!0,c.a.defaults.headers.common["Authorization"]="",delete c.a.defaults.headers.common["Authorization"];var t=JSON.parse(d.get("User"));if(null!=t.authStore.currentUser){var s=t.authStore.currentUser.token;s&&(e.headers.common.Authorization="Bearer "+s)}return e}),(function(e){return console.log("error",e),Promise.reject(e)})),l.interceptors.response.use((function(e){return e}),(function(e){return Object(r["a"])(void 0,void 0,void 0,(function(){return Object(r["d"])(this,(function(t){switch(t.label){case 0:return e&&e.response?401!==e.response.status&&"Unauthorized"!==e.response.statusText&&500!==e.response.status?[3,2]:[4,o["a"].dispatch("authStore/Logout")]:[3,2];case 1:t.sent(),t.label=2;case 2:return e&&e.message?"Network Error"!==e.message?[3,4]:[4,o["a"].dispatch("authStore/Logout")]:[3,4];case 3:t.sent(),console.log("Error!",e.message),t.label=4;case 4:return[2,Promise.reject(e.response)]}}))}))})),t["a"]=l},a5e5:function(e,t,s){"use strict";s("2da4")},d81d:function(e,t,s){"use strict";var r=s("23e7"),n=s("b727").map,c=s("1dde"),a=s("ae40"),i=c("map"),o=a("map");r({target:"Array",proto:!0,forced:!i||!o},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=view-bet-SelectedBet-vue.0464e119.js.map