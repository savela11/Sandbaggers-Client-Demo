(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["view-Bets-vue"],{1276:function(t,e,n){"use strict";var r=n("d784"),s=n("44e7"),i=n("825a"),a=n("1d80"),c=n("4840"),o=n("8aa5"),u=n("50c4"),l=n("14c3"),d=n("9263"),p=n("d039"),f=[].push,h=Math.min,m=4294967295,v=!p((function(){return!RegExp(m,"y")}));r("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(a(this)),i=void 0===n?m:n>>>0;if(0===i)return[];if(void 0===t)return[r];if(!s(t))return e.call(r,t,i);var c,o,u,l=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,v=new RegExp(t.source,p+"g");while(c=d.call(v,r)){if(o=v.lastIndex,o>h&&(l.push(r.slice(h,c.index)),c.length>1&&c.index<r.length&&f.apply(l,c.slice(1)),u=c[0].length,h=o,l.length>=i))break;v.lastIndex===c.index&&v.lastIndex++}return h===r.length?!u&&v.test("")||l.push(""):l.push(r.slice(h)),l.length>i?l.slice(0,i):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var s=a(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,s,n):r.call(String(s),e,n)},function(t,s){var a=n(r,t,this,s,r!==e);if(a.done)return a.value;var d=i(t),p=String(this),f=c(d,RegExp),b=d.unicode,B=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(v?"y":"g"),g=new f(v?d:"^(?:"+d.source+")",B),y=void 0===s?m:s>>>0;if(0===y)return[];if(0===p.length)return null===l(g,p)?[p]:[];var A=0,_=0,w=[];while(_<p.length){g.lastIndex=v?_:0;var C,x=l(g,v?p:p.slice(_));if(null===x||(C=h(u(g.lastIndex+(v?0:_)),p.length))===A)_=o(p,_,b);else{if(w.push(p.slice(A,_)),w.length===y)return w;for(var O=1;O<=x.length-1;O++)if(w.push(x[O]),w.length===y)return w;_=A=C}}return w.push(p.slice(A)),w}]}),!v)},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},2362:function(t,e,n){"use strict";n("d3b7");var r=n("9ab4"),s=n("86bc"),i="/bets",a=function(){function t(){}return t.GetUserBets=function(t){return Object(r["a"])(this,void 0,Promise,(function(){return Object(r["d"])(this,(function(e){switch(e.label){case 0:return[4,s["a"].get(i+"/UserBets/"+t)];case 1:return[2,e.sent()]}}))}))},t.AllActiveBets=function(){return Object(r["a"])(this,void 0,Promise,(function(){return Object(r["d"])(this,(function(t){switch(t.label){case 0:return[4,s["a"].get(i+"/AllActiveBets")];case 1:return[2,t.sent()]}}))}))},t.UpdateBet=function(t){return Object(r["a"])(this,void 0,Promise,(function(){return Object(r["d"])(this,(function(e){switch(e.label){case 0:return[4,s["a"].post(i+"/UpdateBet",t)];case 1:return[2,e.sent()]}}))}))},t.CreateBet=function(t){return Object(r["a"])(this,void 0,Promise,(function(){return Object(r["d"])(this,(function(e){switch(e.label){case 0:return[4,s["a"].post(i+"/CreateBet",t)];case 1:return[2,e.sent()]}}))}))},t.UserAcceptsBet=function(t){return Object(r["a"])(this,void 0,Promise,(function(){return Object(r["d"])(this,(function(e){switch(e.label){case 0:return[4,s["a"].post(i+"/AcceptBet",t)];case 1:return[2,e.sent()]}}))}))},t.GetBetById=function(t){return Object(r["a"])(this,void 0,Promise,(function(){return Object(r["d"])(this,(function(e){switch(e.label){case 0:return[4,s["a"].get(i+"/Bet/"+t)];case 1:return[2,e.sent()]}}))}))},t}();e["a"]=a},"356a":function(t,e,n){t.exports=n.p+"img/addCircle.e9f990d0.svg"},"4d51":function(t,e,n){"use strict";n("7760")},7760:function(t,e,n){},8418:function(t,e,n){"use strict";var r=n("c04e"),s=n("9bf2"),i=n("5c6c");t.exports=function(t,e,n){var a=r(e);a in t?s.f(t,a,i(0,n)):t[a]=n}},"841c":function(t,e,n){"use strict";var r=n("d784"),s=n("825a"),i=n("1d80"),a=n("129f"),c=n("14c3");r("search",1,(function(t,e,n){return[function(e){var n=i(this),r=void 0==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var i=s(t),o=String(this),u=i.lastIndex;a(u,0)||(i.lastIndex=0);var l=c(i,o);return a(i.lastIndex,u)||(i.lastIndex=u),null===l?-1:l.index}]}))},"86bc":function(t,e,n){"use strict";n("d3b7");var r=n("9ab4"),s=n("bc3a"),i=n.n(s),a=n("88b4"),c=n.n(a),o=n("0613"),u="https://sandbaggerapi.azurewebsites.net/api",l=new c.a({isCompression:!1}),d=i.a.create({baseURL:u});d.interceptors.request.use((function(t){t.withCredentials=!0,i.a.defaults.headers.common["Authorization"]="",delete i.a.defaults.headers.common["Authorization"];var e=JSON.parse(l.get("User"));if(null!=e.authStore.currentUser){var n=e.authStore.currentUser.token;n&&(t.headers.common.Authorization="Bearer "+n)}return t}),(function(t){return console.log("error",t),Promise.reject(t)})),d.interceptors.response.use((function(t){return t}),(function(t){return Object(r["a"])(void 0,void 0,void 0,(function(){return Object(r["d"])(this,(function(e){switch(e.label){case 0:return t&&t.response?401!==t.response.status&&"Unauthorized"!==t.response.statusText&&500!==t.response.status?[3,2]:[4,o["a"].dispatch("authStore/Logout")]:[3,2];case 1:e.sent(),e.label=2;case 2:return t&&t.message?"Network Error"!==t.message?[3,4]:[4,o["a"].dispatch("authStore/Logout")]:[3,4];case 3:e.sent(),console.log("Error!",t.message),e.label=4;case 4:return[2,Promise.reject(t.response)]}}))}))})),e["a"]=d},"8b5e":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"bets"},[t.isAddingBet&&!t.loading?r("Modal",{on:{click:function(e){t.isAddingBet=!1}},scopedSlots:t._u([{key:"header",fn:function(){return[t.loading?t._e():r("h2",[t._v("Add Bet")])]},proxy:!0},{key:"body",fn:function(){return[t.modalLoading?r("Loading"):r("form",{staticClass:"form--addBet"},[r("InputField",{attrs:{isActive:""!==t.addBetForm.title,className:"secondary"},scopedSlots:t._u([{key:"field",fn:function(){return[r("label",{attrs:{for:"title"}},[t._v("Title")]),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.addBetForm.title,expression:"addBetForm.title",modifiers:{trim:!0}}],attrs:{type:"text",id:"title"},domProps:{value:t.addBetForm.title},on:{input:function(e){e.target.composing||t.$set(t.addBetForm,"title",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]},proxy:!0}],null,!1,4215128823)}),r("div",{staticClass:"form__field"},[r("p",{staticClass:"amountTitle"},[t._v(" Active: "),r("span",{attrs:{id:"spanActiveStatus"}},[t._v(" "+t._s(t.addBetForm.isActive?"Yes":"No"))])]),r("div",{staticClass:"btns"},[r("button",{class:{clicked:!0===t.addBetForm.isActive},on:{click:function(e){e.preventDefault(),e.stopPropagation(),t.addBetForm.isActive=!0}}},[t._v("Yes")]),r("button",{class:{clicked:!1===t.addBetForm.isActive},on:{click:function(e){e.preventDefault(),e.stopPropagation(),t.addBetForm.isActive=!1}}},[t._v("No")])])]),r("div",{staticClass:"form__field"},[r("p",{staticClass:"amountTitle"},[t._v(" Amount: "),r("span",{attrs:{id:"spanAmt"}},[t._v("$"+t._s(t.addBetForm.amount))])]),r("div",{staticClass:"btns"},t._l(t.amounts,(function(e,n){return r("button",{key:e,ref:"amount",refInFor:!0,on:{click:function(r){return r.preventDefault(),r.stopPropagation(),t.increaseBetAmount(e,n)}}},[t._v("$"+t._s(e))])})),0)]),r("div",{staticClass:"form__field"},[r("p",{staticClass:"amountTitle"},[t._v(" How many can accept? "),r("span",{attrs:{id:"spanAcceptNum"}},[t._v(t._s(t.addBetForm.canAcceptNumber))])]),r("div",{staticClass:"btns btns--acceptBetNum"},t._l(t.numOfAcceptedBets,(function(e){return r("button",{key:e,class:{clicked:t.addBetForm.canAcceptNumber===e},on:{click:function(n){return n.preventDefault(),n.stopPropagation(),t.numberCanAcceptBet(e)}}},[t._v(" "+t._s(e)+" ")])})),0)]),r("InputField",{attrs:{isActive:""!==t.addBetForm.description,className:"secondary"},scopedSlots:t._u([{key:"field",fn:function(){return[r("label",{attrs:{for:"description"}},[t._v("Description")]),r("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.addBetForm.description,expression:"addBetForm.description",modifiers:{trim:!0}}],attrs:{type:"text",id:"description"},domProps:{value:t.addBetForm.description},on:{input:function(e){e.target.composing||t.$set(t.addBetForm,"description",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]},proxy:!0}],null,!1,2873393325)})],1)]},proxy:!0},{key:"submitBtn",fn:function(){return[r("button",{staticClass:"btn btn--xs btn--darkGreen",attrs:{id:"addBetBTN",disabled:!t.validateForm||t.loading||t.modalLoading},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.createBet(e)}}},[t._v("Add")])]},proxy:!0}],null,!1,1516752193)}):t._e(),t.loading?r("Loading"):r("div",[r("div",{staticClass:"bets__viewButtons"},t._l(t.views,(function(e){return r("button",{key:e,staticClass:"viewButton",class:{active:t.currentView===e},on:{click:function(n){return t.setCurrentView(e)}}},[t._v(t._s(e))])})),0),r("hr",{staticClass:"divider"}),r("div",{staticClass:"utilityBar"},["Amount"!==t.currentView?r("div",{staticClass:"searchBets"},[r("InputField",{attrs:{isActive:""!==t.search,className:"search"},scopedSlots:t._u([{key:"field",fn:function(){return[r("label",{attrs:{for:"search"}},[t._v("Search")]),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.search,expression:"search",modifiers:{trim:!0}}],attrs:{type:"text",id:"search"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]},proxy:!0}],null,!1,450463789)})],1):t._e(),r("div",{staticClass:"createBet"},[r("button",{on:{click:function(e){t.isAddingBet=!0}}},[r("img",{attrs:{src:n("356a"),alt:"Add Bet"}}),r("span",[t._v("Add Bet")])])])]),r("div",{staticClass:"bets__list"},t._l(t.filterBets,(function(e){return r("div",{key:e.betId,staticClass:"card",class:{selectedBet:t.selectedBet&&t.selectedBet.betId===e.betId},on:{click:function(n){return n.preventDefault(),n.stopPropagation(),t.showBetDetails(e)}}},[r("div",{staticClass:"card__top"},[r("div",{staticClass:"createdBy"},[r("p",[t._v("Created: "+t._s(t.formatDate(e.createdOn)))]),r("p",[t._v("By: "+t._s(e.createdBy.fullName))])]),r("div",{staticClass:"title"},[r("h2",{staticClass:"text text--bold text--noWrap text--ellipsis text--md"},[t._v(t._s(e.title))])]),r("div",{staticClass:"details"},[r("div",{staticClass:"acceptedBy"},[r("p",[t._v(" Accepted: "),r("span",[t._v(t._s(e.acceptedBy.length)+" of "+t._s(e.canAcceptNumber))])]),e.acceptedBy.length>0?r("button",{on:{click:function(n){return n.preventDefault(),n.stopPropagation(),t.showAcceptedList(e.betId)}}},[t._v("See List")]):t._e(),t.showAcceptedListOfBet===e.betId?r("div",{staticClass:"acceptedByList"},[r("ul",t._l(e.acceptedBy,(function(e){return r("li",{key:e.userId},[t._v(t._s(e.fullName))])})),0)]):t._e()]),r("div",{staticClass:"amount"},[r("span",[t._v("$"+t._s(e.amount))])])])])])})),0),t.filterBets.length>0?r("div",{staticClass:"prevNextButtons"},[r("button",{attrs:{disabled:0===t.pageNumber},on:{click:function(e){return t.changePage("previous")}}},[t._v("Previous")]),r("button",{attrs:{disabled:t.pageNumber>=t.betCount-1},on:{click:function(e){return t.changePage("next")}}},[t._v("Next")])]):t._e()])],1)},s=[],i=(n("a4d3"),n("e01a"),n("4de4"),n("fb6a"),n("d3b7"),n("ac1f"),n("841c"),n("1276"),n("2ca0"),n("9ab4")),a=n("1b40"),c=n("2362"),o=n("2b89"),u=n("53ec"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentView="All",e.Bets=[],e.selectedBet=null,e.search="",e.views=["All","My bets","Amount","Accepted"],e.isAddingBet=!1,e.loading=!0,e.modalLoading=!1,e.addBetForm={title:"",description:"",amount:0,canAcceptNumber:0,requiresPassCode:!1,isActive:!1,userId:""},e.amounts=[1,5,10,25],e.numOfAcceptedBets=[1,2,3,4,5,6,7,8,9,10],e.showAcceptedListOfBet=null,e.size=5,e.pageNumber=0,e}return Object(i["c"])(e,t),Object.defineProperty(e.prototype,"paginatedBets",{get:function(){var t=this.pageNumber*this.size,e=t+this.size;return this.Bets.slice(t,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"betCount",{get:function(){var t=this.Bets.length,e=this.size;return Math.ceil(t/e)},enumerable:!1,configurable:!0}),e.prototype.changePage=function(t){"next"===t?this.pageNumber++:this.pageNumber--,u["a"].verticalSmoothScroll(300,"top")},e.prototype.mounted=function(){this.getBets()},Object.defineProperty(e.prototype,"validateForm",{get:function(){return!!(this.addBetForm.title&&this.addBetForm.description&&this.addBetForm.amount>0&&this.addBetForm.canAcceptNumber>0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filterBets",{get:function(){var t=this;if(this.search){var e=this.Bets.sort((function(t,e){return Date.parse(e.createdOn)-Date.parse(t.createdOn)})),n=e.filter((function(e){var n=e.createdBy.fullName.split(" ",2)[0],r=e.createdBy.fullName.split(" ",2)[1];if(n.toLowerCase().startsWith(t.search.toLowerCase())||r.toLowerCase().startsWith(t.search.toLowerCase()))return e}));return"My bets"===this.currentView?n.filter((function(e){return e.createdBy.id===t.$store.state.authStore.currentUser.id})):"Accepted"===this.currentView?n.filter((function(t){return t.acceptedBy.length>0})):n}return this.paginatedBets.sort((function(t,e){return Date.parse(e.createdOn)-Date.parse(t.createdOn)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"checkIfCurrentUsersBet",{get:function(){return!(this.selectedBet&&this.selectedBet.createdBy.id===this.$store.state.authStore.currentUser.id||this.selectedBet&&this.selectedBet.acceptedBy.length===this.selectedBet.canAcceptNumber)},enumerable:!1,configurable:!0}),e.prototype.getBets=function(){return Object(i["a"])(this,void 0,Promise,(function(){var t,e,n=this;return Object(i["d"])(this,(function(r){switch(r.label){case 0:this.loading=!0,r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,c["a"].AllActiveBets()];case 2:return t=r.sent(),200===t.status&&(this.Bets=t.data),[3,5];case 3:return e=r.sent(),console.log(e),[3,5];case 4:return setTimeout((function(){n.loading=!1}),Math.floor(3e3*Math.random())),[7];case 5:return[2]}}))}))},e.prototype.createBet=function(){return Object(i["a"])(this,void 0,Promise,(function(){var t,e,n=this;return Object(i["d"])(this,(function(r){switch(r.label){case 0:this.modalLoading=!0,this.addBetForm.userId=this.$store.state.authStore.currentUser.id,r.label=1;case 1:return r.trys.push([1,3,4,5]),u["a"].clickedButton("addBetBTN"),[4,c["a"].CreateBet(this.addBetForm)];case 2:return t=r.sent(),200===t.status&&this.Bets.unshift(t.data),[3,5];case 3:return e=r.sent(),console.log(e),[3,5];case 4:return setTimeout((function(){n.modalLoading=!1,n.resetAddBetForm()}),Math.floor(3e3*Math.random())),[7];case 5:return[2]}}))}))},e.prototype.setCurrentView=function(t){this.currentView=t;var e=document.querySelector(".bets__viewButtons");"All"===t&&e?e.scrollLeft=0:e&&(e.scrollLeft=100)},e.prototype.increaseBetAmount=function(t,e){var n=document.getElementById("spanAmt");n&&n.classList.add("flash");var r=this.$refs.amount;r[e].classList.add("clicked"),setTimeout((function(){r[e].classList.remove("clicked"),n&&n.classList.remove("flash")}),500),this.addBetForm.amount+=t},e.prototype.numberCanAcceptBet=function(t){var e=document.getElementById("spanAcceptNum");e&&e.classList.add("flash"),setTimeout((function(){e&&e.classList.remove("flash")}),500),this.addBetForm.canAcceptNumber=t},e.prototype.formatDate=function(t){return o["a"].formatDate(t)},e.prototype.showBetDetails=function(t){this.$router.push("/bets/"+t.betId)},e.prototype.showAcceptedList=function(t){this.showAcceptedListOfBet!==t?this.showAcceptedListOfBet=t:this.showAcceptedListOfBet=null},e.prototype.resetAddBetForm=function(){this.isAddingBet=!1,this.addBetForm={title:"",description:"",amount:0,canAcceptNumber:0,requiresPassCode:!1,isActive:!1,userId:""}},e=Object(i["b"])([Object(a["a"])({name:"Bets",components:{Modal:function(){return n.e("chunk-c13f7c1c").then(n.bind(null,"35f7"))},Loading:function(){return n.e("chunk-9c9507fc").then(n.bind(null,"866a"))},InputField:function(){return n.e("chunk-596959b6").then(n.bind(null,"fc45"))}}})],e),e}(a["d"]),d=l,p=d,f=(n("4d51"),n("2877")),h=Object(f["a"])(p,r,s,!1,null,"36be905e",null);e["default"]=h.exports},fb6a:function(t,e,n){"use strict";var r=n("23e7"),s=n("861d"),i=n("e8b5"),a=n("23cb"),c=n("50c4"),o=n("fc6a"),u=n("8418"),l=n("b622"),d=n("1dde"),p=n("ae40"),f=d("slice"),h=p("slice",{ACCESSORS:!0,0:0,1:2}),m=l("species"),v=[].slice,b=Math.max;r({target:"Array",proto:!0,forced:!f||!h},{slice:function(t,e){var n,r,l,d=o(this),p=c(d.length),f=a(t,p),h=a(void 0===e?p:e,p);if(i(d)&&(n=d.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?s(n)&&(n=n[m],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return v.call(d,f,h);for(r=new(void 0===n?Array:n)(b(h-f,0)),l=0;f<h;f++,l++)f in d&&u(r,l,d[f]);return r.length=l,r}})}}]);
//# sourceMappingURL=view-Bets-vue.200d08fb.js.map